{"componentChunkName":"component---src-templates-blog-template-js","path":"/web/authentication/","result":{"data":{"cur":{"id":"6a6cdf2b-acd2-5124-9fe7-830d299f0f27","html":"<h2 id=\"인증-authentication\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%EC%A6%9D-authentication\" aria-label=\"인증 authentication permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인증 (Authentication)</h2>\n<h3 id=\"1-인증이란\" style=\"position:relative;\"><a href=\"#1-%EC%9D%B8%EC%A6%9D%EC%9D%B4%EB%9E%80\" aria-label=\"1 인증이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 인증이란?</h3>\n<ul>\n<li>유저의 identification를 확인하는 과정. 즉, 아이디와 비밀번호를 확인하는 절차</li>\n<li>인증은 누가 우리 서비스를 쓰는지, 어떻게 쓰는지를 추적하기 위해 필요하다.</li>\n<li>인증을 하기 위해서는 먼저 유저의 아이디와 비밀번호를 생성하는 기능 그리고 그 유저의 아이디와 비밀번호를 확인하는 기능이 필요하다.</li>\n<li>쉽게 말하면 회원가입과 로그인으로 인증을 구현한다.</li>\n</ul>\n<h3 id=\"2-로그인절차와-token\" style=\"position:relative;\"><a href=\"#2-%EB%A1%9C%EA%B7%B8%EC%9D%B8%EC%A0%88%EC%B0%A8%EC%99%80-token\" aria-label=\"2 로그인절차와 token permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 로그인절차와 token</h3>\n<ol>\n<li>회원가입이 된 유저의 아이디와 비밀번호를 입력</li>\n<li>서버에서는 입력한 정보가 DB에 저장된 정보와 일치하는지 확인</li>\n<li>일치시 로그인 성공과 함께 클라이언트에 access token을 전송</li>\n<li>로그인에 성공한 유저는 인증된 유저로써 이 서버의 로그인이 필요한 서비스를 이용할 시 request에 access token을 첨부해서 서버에 전송하므로 매번 로그인해도 되지 않도록 한다.</li>\n</ol>\n<h3 id=\"3-비밀번호-관리\" style=\"position:relative;\"><a href=\"#3-%EB%B9%84%EB%B0%80%EB%B2%88%ED%98%B8-%EA%B4%80%EB%A6%AC\" aria-label=\"3 비밀번호 관리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 비밀번호 관리</h3>\n<ul>\n<li>비밀번호는 보안을 위해 반드시 암호화되어 DB에 저장되어야 한다.</li>\n<li>비밀번호가 암호화되지 않은 채로 DB에 저장이 되었을 경우, DB가 해킹당하면 유저의 정보가 모두 노출될 수 있고,</li>\n<li>해킹의 경우가 아니더라도 내부 개발자 등에 의해 유저의 정보가 노출될 가능성이 있기 때문</li>\n</ul>\n<h3 id=\"4-비밀번호-암호화-방법\" style=\"position:relative;\"><a href=\"#4-%EB%B9%84%EB%B0%80%EB%B2%88%ED%98%B8-%EC%95%94%ED%98%B8%ED%99%94-%EB%B0%A9%EB%B2%95\" aria-label=\"4 비밀번호 암호화 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 비밀번호 암호화 방법</h3>\n<h4 id=\"4-1-해시함수란\" style=\"position:relative;\"><a href=\"#4-1-%ED%95%B4%EC%8B%9C%ED%95%A8%EC%88%98%EB%9E%80\" aria-label=\"4 1 해시함수란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4-1. 해시함수란?</h4>\n<ul>\n<li>임의의 길이의 데이터를 고정된 길이의 데이터로 반환시켜주는 함수이다.</li>\n<li>입력값의 길이가 달라도 출력값은 언제나 고정된 길이로 반환한다.</li>\n<li>동일한 값이 입력되면 언제나 동일한 출력 값을 보장한다.</li>\n<li>해시함수는 암호학적 해시 함수와 비 암호학적 해시함수로 구분된다.</li>\n</ul>\n<h4 id=\"4-2-단방향-암호화\" style=\"position:relative;\"><a href=\"#4-2-%EB%8B%A8%EB%B0%A9%ED%96%A5-%EC%95%94%ED%98%B8%ED%99%94\" aria-label=\"4 2 단방향 암호화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4-2. 단방향 암호화</h4>\n<ul>\n<li>암호화에는 양방향 암호화와 단방향 암호화가 있는데, 비밀번호를 암호화할 때는 주로 단방향 암호화를 사용한다.</li>\n<li>단방향 암호화란, 평문을 암호문으로 바꾸는 ‘암호화’는 가능하지만, 암호문을 평문으로 바꾸는 ‘복호화’는 불가능한 암호화를 말한다.</li>\n<li>단방향 암호화에는 주로 해시 함수를 이용하는데 이를 단방향 해시 함수(one-way hash function)라고 한다.</li>\n<li>단방향 해시 함수는 입력값을 문자와 숫자를 임의로 나열한 일정한 길이의 다이제스트(Digest) 형태로 변환시켜준다. 여기서 다이제스트란, 해시함수를 통해 생성된 암호화된 메시지이다.</li>\n<li>단방향 해시함수에는 MD5, SHA-1, SHA-256 등이 있다.</li>\n</ul>\n<h4 id=\"4-2-단방향-암호화의-취약점\" style=\"position:relative;\"><a href=\"#4-2-%EB%8B%A8%EB%B0%A9%ED%96%A5-%EC%95%94%ED%98%B8%ED%99%94%EC%9D%98-%EC%B7%A8%EC%95%BD%EC%A0%90\" aria-label=\"4 2 단방향 암호화의 취약점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4-2. 단방향 암호화의 취약점</h4>\n<ul>\n<li>무차별 대입 공격(brute-force attack)에 취약\n<ul>\n<li>해시 함수는 원래 짧은 시간에 데이터를 검색하기 위해 설계된 것이다. 그렇게 대문에 해시 함수는 본래 처리 속도가 최대한 빠르도록 설계되었다.</li>\n<li>이런 속성 때문에 공격자는 매우 빠른 속도로 임의의 문자열의 다이제스트와 해킹할 대상의 다이제스트를 비교할 수 있다.</li>\n<li>이런 방식으로 패스워드를 추측하면 패스워드가 충분히 길거나 복잡하지 않은 경우에는 그리 긴 시간이 걸리지 않는다.</li>\n</ul>\n</li>\n<li>Rainbow table attack에 취약\n<ul>\n<li>단방향 해시 함수는 같은 값을 해싱하면 언제나 같은 다이제스트가 나온다.</li>\n<li>이 점을 이용하여 사용자들이 많이 쓰는 패스워드를 미리 해싱하여 결과값들을 모아 둔 테이블을 Rainbow table이라고 한다.</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"4-3-취약점을-보완하기-위한-기법\" style=\"position:relative;\"><a href=\"#4-3-%EC%B7%A8%EC%95%BD%EC%A0%90%EC%9D%84-%EB%B3%B4%EC%99%84%ED%95%98%EA%B8%B0-%EC%9C%84%ED%95%9C-%EA%B8%B0%EB%B2%95\" aria-label=\"4 3 취약점을 보완하기 위한 기법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4-3. 취약점을 보완하기 위한 기법</h4>\n<h5 id=\"salting\" style=\"position:relative;\"><a href=\"#salting\" aria-label=\"salting permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SALTING</h5>\n<ul>\n<li>소금을 친다는 뜻의 salting은 이름처럼 실제 비밀번호의 앞, 뒤 아무 곳에 랜덤 데이터를 더해서 해시값을 계산하는 방법을 말한다.</li>\n<li>사용된 salt 값은 나중에 비밀번호 일치를 확인하기 위해 같이 저장된다.</li>\n<li>Rainbow table attack을 방지할 수 있는 효과가 있다.</li>\n</ul>\n<h5 id=\"key-stretching\" style=\"position:relative;\"><a href=\"#key-stretching\" aria-label=\"key stretching permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Key Stretching</h5>\n<ul>\n<li>해시 암호화를 여러 번 반복하는 기법이다.</li>\n<li>무차별 대입 공격을 방지하는 효과가 있다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACq0lEQVQ4y4WSyU8TYRjGazReFD149h8wRuLBk1ETNOGCy8HIzcTowRgNJorGKG5BDQkaiNG4JCoqVqyKIlBpLZuhgqWAZZXSEihb1+nMdIGB6c/QhbA1Ppkv873zzjzfM8/zaliGWCy2pFZVdWEpipLcx9K+r1ncSDVlWSIQCOB0OmhuasRsNmO1WjGZTLS0tDDkcMT7kUhkBalm6Umx+PWxtpTzt7LJLzzCteKjXLh9iPzCw1x/cIy8ghxulORytuAADebK+Ldzc3NpFJI4ydyu58X7e5R9KKb8831eaot4oyvmSdlNnpYVov1SwvPyQnoGLAu2rCBMkJJQmQZud5D/ea5Jebd4qeosakwlJPkRvA6CvmEikothezueiUFE3zBi0I2atGlVD5dj3pWR1rv4TfuZMBykQ3sAy9ssxutyEOqzcTacQ5mdWxmKGAzi8XjjqYmiSEAQae8q5U9fG67GPMLG7Qy+30nrs210vNqB7U0msiGTqYZcpmeUlYSyJOFxOvA7HYijIzjtQ3TY3hEM+ZjsLmO8/jh2w2kG9CexVebSW3MKV/0JXL+LUGbV9GOTgt/rxTMViO8VFeRpkKMxBoZcWLr6EWQl/iw8Q3zAU2SpeyKURbHPIxiNMur1Igh+orIfn3ss7mpECiTdTZ+0JlWEBQG7vpq+2m/066txGvXYOrvR1f2iptFKXUs3rz8ZqDS2UdPUQXVDO7XNXQhiaKlCNTnlY5Y2Kras53HGGh5uWsvXrRmU3HnEur2XydhzkU1ZV9m4O4/N+wvI2HeJ9bvOsGHfFSw9w4mpSP7lgsLpkMxkp5W/P5uor9DSYzIyOeGmzWZHV2XgY7UJXZURbeV3dFU/sHTbsfY6CYWjSxWuNu0+UURZVEdkkbAkEpYlQlKQSEhK6+E/7J0zgcMeJ7sAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"salting, key stretching image\"\n        title=\"salting, key stretching image\"\n        src=\"/static/4043c8e048120906891ec6ccd692460c/37523/salting.png\"\n        srcset=\"/static/4043c8e048120906891ec6ccd692460c/e9ff0/salting.png 180w,\n/static/4043c8e048120906891ec6ccd692460c/f21e7/salting.png 360w,\n/static/4043c8e048120906891ec6ccd692460c/37523/salting.png 720w,\n/static/4043c8e048120906891ec6ccd692460c/302a4/salting.png 1080w,\n/static/4043c8e048120906891ec6ccd692460c/21335/salting.png 1082w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"5-bcrypt를-이용한-암호화-구현\" style=\"position:relative;\"><a href=\"#5-bcrypt%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%95%94%ED%98%B8%ED%99%94-%EA%B5%AC%ED%98%84\" aria-label=\"5 bcrypt를 이용한 암호화 구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. bcrypt를 이용한 암호화 구현</h3>\n<p>Saiting &#x26; Key Stretching 대표적인 라이브러리</p>\n<ul>\n<li>bcrypt는 Salting과 Key Stretching을 구현할 수 있는 라이브러리로 다양한 언어를 지원한다.</li>\n<li>bcrypt는 처음부터 비밀번호를 단방향 암호화하기 위해 만들어진 해쉬 함수이며 가장 널리 쓰인다.</li>\n<li>bcrypt는 hash 결과값에 salt값과 해시 값 및 반복 횟수를 같이 보관하기 때문에 비밀번호 해싱을 적용하는 데 있어 DB설계를 복잡하게 할 필요가 없어서 암호화를 구현하는데 매우 편리하다.</li>\n<li>bcrypt를 통해 해싱된 결과 값(Digest)의 구조는 아래와 같다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABBUlEQVQY02XP2U4CYRCEUd7/tUxIRIygMUZFZMRhgJl/6wW8+xTGFS9O6qZTqR6oCJozOQtJMkHityjpSKVgkj8lLHdYCVhJWIm9w50qA9uuKZMbrq43jJopw3rMWT065riZct5MaOpb9strrLnDX2/w+RBfjPHlBH+5xBcXeH2LHQtFkC7QRaHVLfP0TPHM297xnbLbG24JDzXe3GPrB2zzhK9nWGoxc8zs01dhTLRpx3NlPM4zVVV4mhVeKqFa9FIsuGZUMlpSn6qoGao/joXWdUhdE2ZL4qolJSMEISUldEqMioih5if+lvWFh6kpossKW71iocXd/jm8c1hkp+xXfrz8DqDDxSJQ7lyaAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"bcrypt_image\"\n        title=\"bcrypt_image\"\n        src=\"/static/9975f36ed712efda6d9cf0f1455ea0fb/37523/bcrypt.png\"\n        srcset=\"/static/9975f36ed712efda6d9cf0f1455ea0fb/e9ff0/bcrypt.png 180w,\n/static/9975f36ed712efda6d9cf0f1455ea0fb/f21e7/bcrypt.png 360w,\n/static/9975f36ed712efda6d9cf0f1455ea0fb/37523/bcrypt.png 720w,\n/static/9975f36ed712efda6d9cf0f1455ea0fb/18539/bcrypt.png 1074w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EC%9D%B8%EC%A6%9D-authentication\">인증 (Authentication)</a></p>\n<ul>\n<li>\n<p><a href=\"#1-%EC%9D%B8%EC%A6%9D%EC%9D%B4%EB%9E%80\">1. 인증이란?</a></p>\n</li>\n<li>\n<p><a href=\"#2-%EB%A1%9C%EA%B7%B8%EC%9D%B8%EC%A0%88%EC%B0%A8%EC%99%80-token\">2. 로그인절차와 token</a></p>\n</li>\n<li>\n<p><a href=\"#3-%EB%B9%84%EB%B0%80%EB%B2%88%ED%98%B8-%EA%B4%80%EB%A6%AC\">3. 비밀번호 관리</a></p>\n</li>\n<li>\n<p><a href=\"#4-%EB%B9%84%EB%B0%80%EB%B2%88%ED%98%B8-%EC%95%94%ED%98%B8%ED%99%94-%EB%B0%A9%EB%B2%95\">4. 비밀번호 암호화 방법</a></p>\n<ul>\n<li>\n<p><a href=\"#4-1-%ED%95%B4%EC%8B%9C%ED%95%A8%EC%88%98%EB%9E%80\">4-1. 해시함수란?</a></p>\n</li>\n<li>\n<p><a href=\"#4-2-%EB%8B%A8%EB%B0%A9%ED%96%A5-%EC%95%94%ED%98%B8%ED%99%94\">4-2. 단방향 암호화</a></p>\n</li>\n<li>\n<p><a href=\"#4-2-%EB%8B%A8%EB%B0%A9%ED%96%A5-%EC%95%94%ED%98%B8%ED%99%94%EC%9D%98-%EC%B7%A8%EC%95%BD%EC%A0%90\">4-2. 단방향 암호화의 취약점</a></p>\n</li>\n<li>\n<p><a href=\"#4-3-%EC%B7%A8%EC%95%BD%EC%A0%90%EC%9D%84-%EB%B3%B4%EC%99%84%ED%95%98%EA%B8%B0-%EC%9C%84%ED%95%9C-%EA%B8%B0%EB%B2%95\">4-3. 취약점을 보완하기 위한 기법</a></p>\n<ul>\n<li><a href=\"#salting\">SALTING</a></li>\n<li><a href=\"#key-stretching\">Key Stretching</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#5-bcrypt%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%95%94%ED%98%B8%ED%99%94-%EA%B5%AC%ED%98%84\">5. bcrypt를 이용한 암호화 구현</a></p>\n</li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"인증 (Authentication) 1. 인증이란? 유저의 identification를 확인하는 과정. 즉, 아이디와 비밀번호를 확인하는 절차 인증은 누가 우리 서비스를 쓰는지, 어떻게 쓰는지를 추적하기 위해 필요하다. 인증을 하기 위해서는 먼저 유저의 아이디와 비밀번호를 생성하는 기능 그리고 그 유저의 아이디와 비밀번호를 확인하는 기능이 필요하다. 쉽게 말하면 회원가입과 로그인으로 인증을 구현한다. 2. 로그인절차와 token 회원가입이 된 유저의 아이디와 비밀번호를 입력 서버에서는 입력한 정보가 DB에 저장된 정보와 일치하는지 확인 일치시 로그인 성공과 함께 클라이언트에 access token을 전송 로그인에 성공한 유저는 인증된 유저로써 이 서버의 로그인이 필요한 서비스를 이용할 시 request에 access token을 첨부해서 서버에 전송하므로 매번 로그인해도 되지 않도록 한다. 3. 비밀번호 관리 비밀번호는 보안을 위해 반드시 암호화되어 DB에 저장되어야 한다. 비밀번…","frontmatter":{"date":"February 21, 2022","title":"인증과 인가(1) - 인증이란?","categories":"web","author":"윤명국","emoji":"🌐"},"fields":{"slug":"/web/authentication/"}},"next":{"id":"b95e8daf-9e93-54b7-977b-f353b3804026","html":"<h2 id=\"mtv-패턴\" style=\"position:relative;\"><a href=\"#mtv-%ED%8C%A8%ED%84%B4\" aria-label=\"mtv 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MTV 패턴</h2>\n<p>CRUD2 세션의 내용중 MTV 패턴이란 단어가 궁금해서 알아보았다.\nMTV 패턴이란 Django 프로젝트 내에서 유저의 요청부터 응답까지 동작하는 방식에 대한 패턴 중의 하나이다.</p>\n<p>장고는 MVC(Model-View-Controller)패턴과 대응되는 MTV(Model - Template - View)을 따르며 기본적인 틀은 유사하다.\n각각의 구성 요소들이 독립적으로 자신의 임무를 수행하여 Django Framework가 동작되는 것이며 각각의 역할은 다음과 같다.</p>\n<h3 id=\"1-model\" style=\"position:relative;\"><a href=\"#1-model\" aria-label=\"1 model permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Model</h3>\n<p>DB에 저장되는 데이터를 의미한다. excel과 같은 표의 형태로 정리하여 데이터베이스에 넣는다고 생각하면 이해하기 쉽다.\n모델은 클래스로 정의되며 하나의 클래스가 하나의 DB Table이다.\n원래 DB를 조작하기 위해선 SQL을 다룰 줄 알아야 하지만 장고는 ORM(Object Relational Mapping)기능을 지원하기 때문에 파이썬 코드로 DB를 조작할 수 있다.</p>\n<blockquote>\n<p>ORM (Obeject-Relational Mapping)<br>\nSQL 언어 대신 데이터베이스를 쉽게 연결해 주는 방법</p>\n</blockquote>\n<h3 id=\"2-template\" style=\"position:relative;\"><a href=\"#2-template\" aria-label=\"2 template permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Template</h3>\n<p>유저에게 보여지는 화면을 의미한다. 장고는 뷰에서 로직을 처리한 후 html 파일을 context와 함께 렌더링하는데 이 때의 html 파일을 템플릿이라 칭한다.\n장고는 자체적인 Django Template 문법을 지원하며 이 문법 덕분에 html 파일 내에서 context로 받은 데이터를 활용할 수 있다.\n장고 템플릿 시스템 문법에 맞게 python문법을 활용하여 작성하면 되므로, 다른 작업들과 화면 디자인 작업을 분리하여 확장성을 극대화 한다.\n즉, 보여지는 부분을 만드는 사람은 그 부분에만 집중하여 만들 수 있게 도와주는 역할을 한다.</p>\n<h3 id=\"3-view\" style=\"position:relative;\"><a href=\"#3-view\" aria-label=\"3 view permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. View</h3>\n<p>뷰는 웹 요청을 받고, 전달받은 데이터들을 해당 어플리케이션의 로직으로 가공하여, 그 결과를 템플릿에 보내준다. MTV 각각 요소가 모두 중요하지만 그 중에서도 머리역할을 하는 녀석이 View이다. 데이터를 가공하는 처리를 해야한다 싶으면 뷰를 건드리면 된다.\n다만 항상 템플릿을 렌더링 하는 것은 아니고 백엔드에서 데이터만 주고 받는 경우도 있다.</p>\n<h3 id=\"4-urlconf\" style=\"position:relative;\"><a href=\"#4-urlconf\" aria-label=\"4 urlconf permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. URLconf</h3>\n<p>URL은 view와 template을 이어주는 역할을 하고, 요 부분을 만들어 주는 작업을 URLconf라고 한다. URL 패턴을 정의하여 해당 URL과 뷰를 매핑하는 단계라고 생각하면 된다.</p>\n<h2 id=\"간단정리\" style=\"position:relative;\"><a href=\"#%EA%B0%84%EB%8B%A8%EC%A0%95%EB%A6%AC\" aria-label=\"간단정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>간단정리</h2>\n<ul>\n<li>데이터저장 형태를 어떻게할지 설정하겠다. → Model</li>\n<li>유저에게 보여지는 화면을 고치고 싶다. → Template</li>\n<li>데이터를 처리해서 가공하고 싶다. → View</li>\n<li>가공한 데이터를 유저가 보는 화면으로 넘겨주고 싶다 → URLconf</li>\n</ul>\n<h2 id=\"mtv패턴-순서\" style=\"position:relative;\"><a href=\"#mtv%ED%8C%A8%ED%84%B4-%EC%88%9C%EC%84%9C\" aria-label=\"mtv패턴 순서 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MTV패턴 순서</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABz0lEQVQoz22STWsTURSG79K/4T8QXLh37V/Qf+Cmwe4julN0YRW0i3aVhZsGAkqwUFG3Umg0rY3GTkJsKo6ZTJKZ+/nIvcnEfPTAYeYe7rznOe8cwUI453DTF+wsfc2HlSN0cwd7tIVtPEd/eYmVCdo4Li769Ho9kiRBhMvWYowJz6C31MWGs/t7TPpYcHJPcLwpSB4K8l+fGU4sH94fUKlUaLVaiIKgiCDqHAlwDkhnZ4Qp6usO2eEzssMt1NEr9CRGW0e/f06n0/lPWK/XKZVKfDs9DR/n1nJrOORKHLMtZWhgvCiggcysTLEQQilFrVajXC6zV62GYpLnXI1jRLfL/fEEbM6kI1E3M7JrI/LrY+SNCTYyU1fM1GufgTCKomCq91FpjTWGT1rz2hjOpA5sqqlRQnEmftIWbTKR4RrucsE0TRkMBnha7QW9j37UPAfrx7WY1KC2FfqJRj9VyBcSO7Tz7ZiPXByyLAtiRZhZurXf7utuadWWPCxQ52TFPi5kaCjHfDx5y7vGHvuNKgfNGmM5WidcLax2dLO1ice/ebS/ycbubTZ27/DgzV3+jPrTlZrdWRp5keayBsZqunGbKG4Rxd/pxD/QRq0R/gMw8jlhNHkj/gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mtv_pattern_image\"\n        title=\"mtv_pattern_image\"\n        src=\"/static/0d8900d2dd81d60bbc38fae2077d1857/37523/mtv_pattern.png\"\n        srcset=\"/static/0d8900d2dd81d60bbc38fae2077d1857/e9ff0/mtv_pattern.png 180w,\n/static/0d8900d2dd81d60bbc38fae2077d1857/f21e7/mtv_pattern.png 360w,\n/static/0d8900d2dd81d60bbc38fae2077d1857/37523/mtv_pattern.png 720w,\n/static/0d8900d2dd81d60bbc38fae2077d1857/612f7/mtv_pattern.png 773w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol>\n<li>유저가 특정 url로 요청</li>\n<li>urlConf를 통해 해당 url과 매핑된 뷰를 호출</li>\n<li>호출된 뷰는 요청에 따라 적절한 로직을 수행하며 그 과정에서 모델에게 CRUD를 지시</li>\n<li>모델은 ORM을 통해 DB와 소통하며 CRUD를 수행</li>\n<li>그 후 뷰는 지정된 템플릿을 렌더링</li>\n<li>최종 결과를 응답으로 반환</li>\n</ol>\n<hr>\n<p>[참고]<br>\n<a href=\"https://tibetsandfox.tistory.com/16\">https://tibetsandfox.tistory.com/16</a><br>\n<a href=\"https://towardsdatascience.com/working-structure-of-django-mtv-architecture-a741c8c64082\">https://towardsdatascience.com/working-structure-of-django-mtv-architecture-a741c8c64082</a></p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#mtv-%ED%8C%A8%ED%84%B4\">MTV 패턴</a></p>\n<ul>\n<li><a href=\"#1-model\">1. Model</a></li>\n<li><a href=\"#2-template\">2. Template</a></li>\n<li><a href=\"#3-view\">3. View</a></li>\n<li><a href=\"#4-urlconf\">4. URLconf</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EA%B0%84%EB%8B%A8%EC%A0%95%EB%A6%AC\">간단정리</a></p>\n</li>\n<li>\n<p><a href=\"#mtv%ED%8C%A8%ED%84%B4-%EC%88%9C%EC%84%9C\">MTV패턴 순서</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"February 15, 2022","title":"MTV 패턴","categories":"django","author":"윤명국","emoji":"📚"},"fields":{"slug":"/django/mtv_pattern/"}},"prev":{"id":"540f1204-0d2f-5770-9882-cc17e3be4277","html":"<h2 id=\"인가-authorization\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%EA%B0%80-authorization\" aria-label=\"인가 authorization permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인가 (Authorization)</h2>\n<h3 id=\"1-인가란\" style=\"position:relative;\"><a href=\"#1-%EC%9D%B8%EA%B0%80%EB%9E%80\" aria-label=\"1 인가란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 인가란?</h3>\n<p>요청을 보낸 유저가 그 서비스를 사용할 수 있는 유저인지를 확인하는 절차이다.</p>\n<h3 id=\"2-인가-절차\" style=\"position:relative;\"><a href=\"#2-%EC%9D%B8%EA%B0%80-%EC%A0%88%EC%B0%A8\" aria-label=\"2 인가 절차 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 인가 절차</h3>\n<ol>\n<li>서버에 로그인을 성공한 유저는 인증을 받았다는 표시로 그 서버가 발행한 토큰을 발급받는다.</li>\n</ol>\n<p>보통 이 토큰을 access token 이라고 한다. 이 token에는 user id와 같이 아주 중요한 정보가 아니면서도(예를 들어 주민등록번호 같은) 유저를 확실하게 구분할 수 있는 정보가 있어야 한다.\n2. 인증을 받은 유저는 request를 보낼 때 request header에 보통 ‘Authorization’ 라는 이름으로 token 정보를 담아서 보낸다.\n3. 서버는 이 request에 담긴 token 정보를 복호화하여 우리 서버에서 발급한 token이 맞는지 그리고 token에 담긴 user id를 확인할 수 있다.\n4. token에서 얻은 user id를 사용해서 DB에서 해당 유저의 권한(permission)을 확인한다.\n5. 해당 유저가 그 요청을 사용할 수 있는 권한을 가지고 있으면 해당 요청을 처리한다.\n6. 유저가 권한을 가지고 있지 않은 유저라면 Unauthorized Response(401) 에러 또는 적절한 다른 에러 코드를 보낸다.</p>\n<h3 id=\"3-json-web-token-jwt\" style=\"position:relative;\"><a href=\"#3-json-web-token-jwt\" aria-label=\"3 json web token jwt permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. JSON Web Token (JWT)</h3>\n<h4 id=\"3-1-jwt란\" style=\"position:relative;\"><a href=\"#3-1-jwt%EB%9E%80\" aria-label=\"3 1 jwt란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3-1. JWT란?</h4>\n<ol>\n<li>access token을 생성하는 방법에는 여러가지가 있는데, 그 중 가장 널리 사용되는 기술 중 하나가 바로 JSON Web Token(JWT)이다.</li>\n<li>JSON Web Token (JWT) 은 웹표준 (RFC 7519) 으로서 두 개체에서 JSON 객체를 사용하여 가볍고 자가수용적인 (self-contained) 방식으로 정보를 안전성 있게 전달해주고, 사용자에 대한 속성을 저장하는 Claim 기반의 Web Token이다.</li>\n<li>자가 수용적 이라는 말은 JWT 는 필요한 모든 정보를 자체적으로 지니고 있다는 것을 뜻한다.</li>\n<li>토큰에 대한 기본정보(header), 전달 할 정보(payload), 그리고 토큰이 검증됐다는것을 증명해주는 Signature 를 포함하고있다.</li>\n<li>JWT는 양방향 해쉬 알고리즘이 적용되어 있는데, 이를 이용하여 프론트엔드에서는 API요청 시 암호화 된 토큰 정보를 보내고 백엔드에서는 이 토큰을 복호화해서 유저의 권한을 확인한다.</li>\n</ol>\n<h4 id=\"3-2-jwt-구조\" style=\"position:relative;\"><a href=\"#3-2-jwt-%EA%B5%AC%EC%A1%B0\" aria-label=\"3 2 jwt 구조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3-2 JWT 구조</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHfWQNKh//EABkQAQACAwAAAAAAAAAAAAAAAAABEgIRIf/aAAgBAQABBQJjyFFERp//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAAAAREgIf/aAAgBAQAGPwI1zX//xAAaEAEBAQADAQAAAAAAAAAAAAABEQAhMUFR/9oACAEBAAE/IafcWHC910Vb3ghK4Rv/2gAMAwEAAgADAAAAEFMP/8QAFxEAAwEAAAAAAAAAAAAAAAAAARAhMf/aAAgBAwEBPxAZV//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAQADAAMBAAAAAAAAAAAAAAEAESExUWFx/9oACAEBAAE/EFLKD94m3fAqtO32ATGc8Xa87iQVMrArs//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"jwt_image\"\n        title=\"jwt_image\"\n        src=\"/static/74aa73433fa4ff3cb89cab06b90fee29/29d31/jwt.jpg\"\n        srcset=\"/static/74aa73433fa4ff3cb89cab06b90fee29/4ec73/jwt.jpg 180w,\n/static/74aa73433fa4ff3cb89cab06b90fee29/158ba/jwt.jpg 360w,\n/static/74aa73433fa4ff3cb89cab06b90fee29/29d31/jwt.jpg 700w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h5 id=\"header\" style=\"position:relative;\"><a href=\"#header\" aria-label=\"header permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Header</h5>\n<ul>\n<li>Header 는 두가지의 정보를 지니고 있다.</li>\n<li>typ: 토큰의 타입을 지정. JWT는 JWT이다.</li>\n<li>alg: Signature 해싱 알고리즘을 지정합니다. 해싱 알고리즘으로는 보통 HMAC-SHA256 혹은 RSA 가 사용되며, 이 알고리즘은 토큰을 검증 할 때 사용되는 signature 부분에서 사용된다.</li>\n</ul>\n<h5 id=\"payload\" style=\"position:relative;\"><a href=\"#payload\" aria-label=\"payload permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Payload</h5>\n<ul>\n<li>Paylaod에는 토큰을 통해 전달할 내용이 담겨져있다.</li>\n<li>여기에 담긴 하나의 key-value 쌍을 ‘Claim’이라고 부르고, Registered, Public, Private의 3가지 유형으로 나뉜다.</li>\n<li>보통 만료일시, 발급일시, 발급자, 권한정보 등이 포함된 공개 클래임</li>\n<li>그리고 클라이언트와 서버간의 협의 하에 사용하는 비공개 클래임이 있다.</li>\n<li>Header와 Payload 부분은 암호화하지 않고 base64로 인코딩만 하기 때문에 웹에 접속한 호스트라면 누구나 볼 수 있다. 따라서 민감함 정보는 넣지 않고, user id와 값은 PK값을 전달한다.</li>\n</ul>\n<h5 id=\"signature\" style=\"position:relative;\"><a href=\"#signature\" aria-label=\"signature permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Signature</h5>\n<ul>\n<li>signature(서명)은 인코딩된 header 와 payload 를 합쳐 header의 signature 알고리즘 정보(alg)를 가져와 암호화하여 생성한다</li>\n<li>만약 헤더정보의 알고리즘이 HS256 일 경우 아래 예시와 같은 signature가 생성된다.</li>\n<li>프론트엔드에서 JWT를 백엔드 API 서버로 전송하면 서버에서는 전송받은 JWT의 Signature 부분을 복호화 하여 이 서버에서 생성한 JWT가 맞는지를 확인한다.(내가 만든 건 복호화 가능하기 때문)</li>\n<li>마치 계약서의 위변조를 막기 위해 서로 사인하는 것과 같다고 보면된다.</li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EC%9D%B8%EA%B0%80-authorization\">인가 (Authorization)</a></p>\n<ul>\n<li>\n<p><a href=\"#1-%EC%9D%B8%EA%B0%80%EB%9E%80\">1. 인가란?</a></p>\n</li>\n<li>\n<p><a href=\"#2-%EC%9D%B8%EA%B0%80-%EC%A0%88%EC%B0%A8\">2. 인가 절차</a></p>\n</li>\n<li>\n<p><a href=\"#3-json-web-token-jwt\">3. JSON Web Token (JWT)</a></p>\n<ul>\n<li>\n<p><a href=\"#3-1-jwt%EB%9E%80\">3-1. JWT란?</a></p>\n</li>\n<li>\n<p><a href=\"#3-2-jwt-%EA%B5%AC%EC%A1%B0\">3-2 JWT 구조</a></p>\n<ul>\n<li><a href=\"#header\">Header</a></li>\n<li><a href=\"#payload\">Payload</a></li>\n<li><a href=\"#signature\">Signature</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"February 22, 2022","title":"인증과 인가(2) - 인가란?","categories":"web","author":"윤명국","emoji":"🌐"},"fields":{"slug":"/web/authorization/"}},"site":{"siteMetadata":{"siteUrl":"https://kkookkss.github.io","comments":{"utterances":{"repo":"kkookkss/kkookkss.github.io"}}}}},"pageContext":{"slug":"/web/authentication/","nextSlug":"/django/mtv_pattern/","prevSlug":"/web/authorization/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}